{
	"$schema": "https://vega.github.io/schema/vega-lite/v5.json",
	"description": "A bar chart with negative values. We can hide the axis domain line, and instead use a conditional grid color to draw a zero baseline.",
	"width": "container",
	"height": "container",
	"data": {
		"url": "data/table1.xlsx"
	},
	"params": [
		{
			"name": "Fire_area_at_least",
			"value": 0,
			"bind": {
				"input": "range",

				"min": 0,
				"max": 5000,
				"step": 100,
				"name": "Fire area ('000 hectares) at least: "
			}
		},
		{
			"name": "State Selection",
			"bind": {
				"input": "select",
				"options": [
					null,
					"Australian Capital Territory (ACT)",
					"New South Wales (NSW)",
					"Northern Territory (NT)",
					"Queensland (QLD)",
					"South Australia (SA)",
					"Tasmania (TAS)",
                    "Victoria (VIC)",
                    "Western Australia (WA)"
				],
				"labels": [
					"Australian Capital Territory (ACT)",
					"New South Wales (NSW)",
					"Northern Territory (NT)",
					"Queensland (QLD)",
					"South Australia (SA)",
					"Tasmania (TAS)",
                    "Victoria (VIC)",
                    "Western Australia (WA)"
				],
				"name": "Select a jurisdiction: "
			}
		}
	],

	"transform": [
		{ "calculate": "datum[1985]-datum[2019]", "as": "mortality_diff" },
		{ "calculate": "abs(datum[1985]-datum[2019])", "as": "mortality_diff_abs" },
		{ "filter": "datum.mortality_diff_abs > Mortality_rate_at_least" },
		{
			"filter": "Continent_selection == null || datum['Continent Name'] == Continent_selection"
		}
	],

	"encoding": {
		"y": {
			"field": "Fire area ('000 hectares)",
			"title": "Fire area ('000 hectares)",
			"type": "quantitative",
			"axis": {
				"gridColor": {
					"condition": { "test": "datum.value === 0", "value": "black" },
					"value": "#ddd"
				}
			}
		},
		"x": {
			"field": "Jurisdiction",
			"type": "nominal"
		}
	},
	"layer": [
		{
			"mark": "bar",

			"encoding": {
				"x": {
					"field": "Jurisdiction",
					"type": "nominal"
				},
				"y": {
                    "field": "Fire area ('000 hectares)",
                    "title": "Fire area ('000 hectares)",
                    "type": "quantitative",
                    "axis": {
                        "gridColor": {
                            "condition": { "test": "datum.value === 0", "value": "black" },
                            "value": "#ddd"
                        }
                    }
                },

				"tooltip": [
					{
						"field": "Jurisdiction",
						"type": "nominal",
						"title": "Jurisdiction"
					},
					{
						"field": "Fire area ('000 hectares)",
						"type": "quantitative",
						"title": "Fire area ('000 hectares)",
						"format": ".2f"
					},
					{
						"field": "Forest area in fire area ('000 hectares)",
						"type": "quantitative",
						"title": "Forest area in fire area ('000 hectares)",
						"format": ".2f"
					},
                    {
						"field": "Proportion of fire area that is forested",
						"type": "quantitative",
						"title": "Proportion of fire area that is forested",
						"format": ".2f"
					}
				]
			}
		}
	]
}